<html>
	<head>
		<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
		<script src="plotly.requests.min.js"></script>
	</head>
	<body>
		<div id="tester" style="width:100%;height:400px;"></div>
		<script>
		TESTER = document.getElementById('tester');

		var trace = {
			"source":{
                "id":"source1",
                "converter": {
                    "name":"CSV",                
                    "script":"used only if name is null",
                    "parameters" : {
                        "columnX":0,
                        "columnY":1
                    }
                }
            },
            //"x": [0,1,2], 
            //"y": [1,2,1],
            "name": "Humidity",
            "mode": "lines+markers",
            "line":{
                "color":"rgba(61,114,201,0.5)",
                "width":1
            },
            "marker" : {
                "size":8,
                "opacity":0.8
            }
		};
		
		Plotly.newPlot("tester",[trace],{},[{
			"id":"source1",
            "url":"https://gist.githubusercontent.com/adeliz/a3603ba0dc1b1f9869f51f9f46e120dd/raw/1d72ccb770a6bfdbb11ad1973d0c9275b6d4c3b5/temperature.csv?",
            "method":"GET",
            "parameters":{
                "name":"sensor1",
                "start":"20151103000000",
                "aggregator":"min",
                "sampling":"1d"
            }
			},
			{
			"id":"source2",
            "url":"https://gist.githubusercontent.com/adeliz/a3603ba0dc1b1f9869f51f9f46e120dd/raw/33c8e9bd297de7e8a9d64a3b43ddf0bdbb44a6ed/pressure.json?",
            "method":"GET",
            "parameters":{
                "name":"sensor2",
                "start":"20151103000000",
                "aggregator":"min",
                "sampling":"1d"
            }
		}]);
		
		Plotly.addTraces("tester",{
			"source":{
                "id":"source2",
                "converter": {
                    "name":"KDB",                
                    "script":"used only if name is null"
                }
            },
            //"x": [0,1,2], 
            //"y": [1,2,1],
            "name": "Pressure",
            "mode": "lines+markers",
            "line":{
                "color":"rgba(255,114,201,0.5)",
                "width":1
            },
            "marker" : {
                "size":8,
                "opacity":0
            }
		},1);
		
		
		var update = {
			opacity: 0.4,
			"marker.color": 'red',
			"marker.opacity": 1,
			"source.id": 'source1'
		};
		var update2 = {
			opacity: 0.4,
			"marker.color": 'green',
			"marker.opacity": 1,
			"source.id": 'source2'
		};
		Plotly.restyle("tester",update,0);
		
		var ds = TESTER.datasources;
		ds[0].parameters.sampling="4d";
		
		Plotly.updateDataSources("tester",ds);
		Plotly.restyle("tester",update2,1);
		
		
		refreshData(TESTER,TESTER.data,TESTER.datasources);
		
		
	</script>
	</body>
</html>