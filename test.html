
<!DOCTYPE html>
<html>
	<head>
		<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
		<script src="index.js"></script>
	</head>
	<body>
		<div id="chart" style="width:100%;height:400px;"></div>
		<script>

		var trace = {
			"source":{
                "id":"source1",
                "converter": {
                    "name":"CSV",                
                    "script":"used only if name is null",
                    "parameters" : {
                    	"separator":",",
                        "x":0,
                        "y":1
                    }
                }
            },
            //"x": [0,1,2], 
            //"y": [1,2,1],
            "name": "Google",
            "mode": "lines+markers",
            "line":{
                "color":"rgba(61,114,201,0.5)",
                "width":1
            },
            "marker" : {
                "size":8,
                "opacity":0.8
            }
		};
		
		Plotly.newPlot("chart",[trace],{},[{
			"id":"source1",
			"url":"https://cors4js.appspot.com?url=http://ichart.finance.yahoo.com/table.csv?",
            "method":"GET",
            "parameters":{
                "s":"GOOG",
                "a":"3",
                "b":"12",
                "c":"2015",
                "d":"1",
                "e":"28",
                "f":"2016",
                "g":"w"
            }
			},
			{
			"id":"source2",
			"url":"https://cors4js.appspot.com?url=http://ichart.finance.yahoo.com/table.csv?",
            "method":"GET",
            "parameters":{
                "s":"YHOO",
                "a":"3",
                "b":"12",
                "c":"2015",
                "d":"1",
                "e":"28",
                "f":"2016",
                "g":"w"
            }
		}]);
		
		Plotly.addTraces("chart",{
			"source":{
                "id":"source2",
                "converter": {
                    "name":"CSV",                
                    "script":"used only if name is null",
                    "parameters" : {
                    	"separator":",",
                        "x":0,
                        "y":1
                    }
                }
            },
            //"x": [0,1,2], 
            //"y": [1,2,1],
            "name": "Yahoo",
            "mode": "lines+markers",
            "line":{
                "color":"rgba(255,114,201,0.5)",
                "width":1
            },
            "marker" : {
                "size":8,
                "opacity":0
            }
		},1);
		
		
		var update = {
			opacity: 0.4,
			"marker.color": 'red',
			"marker.opacity": 1,
			"source.id": 'source1'
		};
		var update2 = {
			opacity: 0.4,
			"marker.color": 'green',
			"marker.opacity": 1,
			"source.id": 'source2'
		};
		Plotly.restyle("chart",update,0);
		
		var chart = document.getElementById("chart");
		var ds = chart.datasources;
		ds[0].parameters.g="m";
		
		Plotly.updateDataSources("chart",ds);
		Plotly.restyle("chart",update2,1);
		
		
		//refreshData(chart,chart.data,chart.datasources);
		
		
	</script>
	
	<div id="chart2" style="width:100%;height:400px;"></div>
	<script>
		Plotly.load("chart2","https://gist.githubusercontent.com/adeliz/b46591ef00d54ba24d1cd554ea86fa20/raw/7f54a060d609b498c8485b61f29f04bfbe1df8cb/finance.json");
	</script>
	</body>
</html>